spring:
  application:
    name: matriz
  datasource:
    url: jdbc:postgresql://postgres:5432/seg  # Cambiado de localhost a postgres (nombre del servicio)
    username: user
    password: secret
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri:  http://matriz-keycloak:8080/realms/matriz  # Cambiado de localhost a matriz-keycloak (nombre del servicio)
          jwk-set-uri: http://matriz-keycloak:8080/realms/matriz/protocol/openid-connect/certs  # Igual aqu√≠
  flyway:
    user: ${spring.datasource.username}
    password: ${spring.datasource.password}
    url: jdbc:postgresql://postgres:5432/seg  # Cambiado de localhost a postgres
    locations: db.migration
  ai:
    ollama:
      chat:
        options:
          model: llama3.2
      base-url: http://ollama:11434
jwt:
  auth:
    converter:
      principle-attribute: preferred_username
      resource-id: matriz-riesgo
server:
  port: 9098
